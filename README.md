# Objectstore

Objectstore is a database for storing Objects that can be related to each other.

You can use Objectstore either as a library in your own app, or run it as a REST server. Methods are exposed to allow you to control the server programatically, and a script to run it out of the box.

Objectstore uses Postgresql as it's backing database.

## Concept

Objectstore has Objects and Relationships

Objects have an id (a uuid generated by Objectstore), a type, and a slug.

Data for the objects is arbitrary JSON.

You can create (add) an object and update (set) it's JSON. The id and type are immutable.

You can create relationships between objects. The relationships have an optional role, expiration and position.

Some uses of relationships are

* parent-child, i.e a collection (use position for ordering)
* access control (use role for type of access)
* group membership with expiration

You can find objects based on their type, relationships, and other parameters.

Use slugs to find named object, without using their id (e.g. looking up a user by username, looking up an item in a collection based on a url fragment)


## Quickstart

### Server

Clone the repo


### Node Module

npm install objectstore

var os = requre('objectstore');


## API


### add

```
var obj = {
  slug: 'my-slug',
  attrs: {}
}

add(obj, done)

add(obj, rel, done)

add(obj, rels, done)
```

### set

### get

### find

### rel


## Rest API


query

{
 count:x
 objects: [x, x, x]
}


find :id :type (find types related to id) [:role]

get :id

set (no id = create, obj returned)
set :id (obj returned)

del :id




rel :id :rel_id [:role :position: :expires]

relate two objects


## Some Use cases

Users and groups

* create a user
* create a group
* add user to group
* give user role in group
find all users with role

create some items
grant access to some of the items to the group 
find items user x (having role y) can access

does user x have role y on item z


does user have 


create a collection
add an item
get all items
find item by slug


create some items
find items











